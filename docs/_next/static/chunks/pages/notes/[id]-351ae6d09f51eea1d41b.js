(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[245],{53971:function(e,t,n){"use strict";n.d(t,{Z:function(){return A}});var r=n(30266),i=n(66311),o=n(809),c=n.n(o),s=n(4604),a=n(71230),d=n(15746),u=n(96486),l=n.n(u),f=n(67294),p=n(1076),h=n(41664),g=n(99490),v=n(85893);function x(e){var t,n,r,i=e.note,o=e.noteIndex,c=(0,p.gt)({note:i,noteIndex:o});try{t=l().get(i,"custom.date",!1)?(n=i.custom.date,r=g.DateTime.DATE_SHORT,g.DateTime.fromISO(n).toLocaleString(r)):function(e,t){return g.DateTime.fromMillis(e).toLocaleString(t)}(i.created,g.DateTime.DATE_SHORT)}catch(s){throw Error("no date found for note ".concat(i.id))}return(0,v.jsx)("div",{children:(0,v.jsxs)("article",{itemScope:!0,itemType:"https://schema.org/CreativeWork",children:[(0,v.jsx)("h2",{itemProp:"headline",children:(0,v.jsx)(h.default,{href:c,children:i.title})}),!l().isUndefined(t)&&(0,v.jsx)("p",{children:t}),l().has(i,"custom.excerpt")&&(0,v.jsx)("p",{itemProp:"description",children:i.custom.excerpt})]})})}var m=n(9008),j=n(23894);function y(e){var t=e.content,n=(0,j.ZP)(t);return(0,v.jsx)(m.default,{children:n})}var b=n(25903),O=n(2962),P=n(28861),w=function(e){return b.Time.DateTime.fromMillis(l().toInteger(e)).setZone("utc").toLocaleString("yyyy-LL-dd")};function N(e){var t=e.note,n=e.config,r=(0,P.vm)().router.asPath;if(l().some(["403","changelog"],(function(e){return r==="/notes/".concat(e,"/")})))return null;var i=b.PublishUtils.getSEOPropsFromConfig(n),o=b.PublishUtils.getSEOPropsFromNote(t),c=l().defaults(o,i),s=c.title,a=c.excerpt,d=null!==c&&void 0!==c&&c.image?[c.image]:[],u=function(e){var t=e.sitePath,n=e.seoProps,r=e.siteConfig;return n.canonicalBaseUrl?[r.siteUrl,t].join(""):n.canonicalUrl?n.canonicalUrl:[r.canonicalBaseUrl?r.canonicalBaseUrl:(0,p.N0)(r),t].join("")}({sitePath:r,seoProps:c,siteConfig:n.site}),f=c.twitter?{handle:c.twitter,site:c.twitter,cardType:"summary_large_image"}:void 0;return(0,v.jsx)(O.PB,{title:s,description:a,canonical:u,noindex:c.noindex,twitter:f,openGraph:{title:s,description:a,url:u,images:d,type:"article",article:{publishedTime:w(c.created),modifiedTime:w(c.updated),tags:function(e){return e.tags?Array.isArray(e.tags)?e.tags:[e.tags]:[]}(t)}}})}var _=n(77103),E=n(92809),S=n(10219),L=n(53419),T=["note"];function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){(0,E.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k=L.Z.Link,U=function(e){e=(e=e.replace(/_/g,"-")).replace(/--/g,"-");var t=[];return e.split("-").forEach((function(e){t.push(e.substr(0,1).toUpperCase()+e.substr(1))})),t.join(" ")},I=function(e){var t,n,r=e.note,o=(0,S.Z)(e,T);return(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)(L.Z,Z(Z({style:{zIndex:1}},o),{},{children:[Object.entries(null===r||void 0===r?void 0:r.anchors).map((function(e){var t,n=(0,i.Z)(e,2),r=n[0],o=n[1];return"header"===(null===o||void 0===o?void 0:o.type)?(0,v.jsx)(k,{href:"#".concat(r),title:U(null!==(t=null===o||void 0===o?void 0:o.text)&&void 0!==t?t:null===o||void 0===o?void 0:o.value)}):(0,v.jsx)(v.Fragment,{})})),(null===r||void 0===r||null===(t=r.links)||void 0===t?void 0:t.length)>0&&null!==r&&void 0!==r&&r.links.some((function(e){return"backlink"===e.type}))?(0,v.jsx)(k,{href:"#backlinks",title:"Backlinks"}):(0,v.jsx)(v.Fragment,{}),(null===r||void 0===r||null===(n=r.children)||void 0===n?void 0:n.length)>0?(0,v.jsx)(k,{href:"#children",title:"Children"}):(0,v.jsx)(v.Fragment,{})]}))})},C=n(21553),F=n(29476),B=n(74622).b.HEADER;function A(e){var t,n=e.note,o=e.body,u=e.collectionChildren,p=e.noteIndex,h=e.customHeadContent,g=e.config,m=(0,s.createLogger)("Note"),j=(0,P.vm)().getActiveNoteId,b=f.useState(void 0),O=(0,i.Z)(b,2),w=O[0],E=O[1],S=j();"root"===S&&(S=p.id);var L=(0,C.$s)(),T=(0,C.O5)((function(e){return e.engine}));m.info({ctx:"enter",id:S});(0,P.dD)().isMobile;f.useEffect((function(){if(m.info({ctx:"updateNoteBody:enter",id:S}),l().isUndefined(S))m.info({ctx:"updateNoteBody:exit",id:S,state:"id undefined"});else{if(S===n.id)return L(F.w.Nw.setLoadingStatus(s.LoadingStatus.FULFILLED)),void m.info({ctx:"updateNoteBody:exit",id:S,state:"id = note.id"});m.info({ctx:"updateNoteBody:fetch:pre",id:S}),fetch("/data/notes/".concat(S,".html")).then(function(){var e=(0,r.Z)(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m.info({ctx:"updateNoteBody:fetch:post",id:S}),e.next=3,t.text();case 3:n=e.sent,E(n),L(F.w.Nw.setLoadingStatus(s.LoadingStatus.FULFILLED));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}),[S]);var D=S===n.id?o:w;if(l().isUndefined(D)||T.loading===s.LoadingStatus.PENDING)return(0,v.jsx)(_.Z,{});var Z=null!==(t=n.custom)&&void 0!==t&&t.has_collection&&!l().isNull(u)?u.map((function(e){return x({note:e,noteIndex:p})})):null;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(N,{note:n,config:g}),h&&(0,v.jsx)(y,{content:h}),(0,v.jsx)(a.Z,{children:(0,v.jsx)(d.Z,{span:24,children:(0,v.jsxs)(a.Z,{gutter:20,children:[(0,v.jsxs)(d.Z,{xs:24,md:20,children:[(0,v.jsx)(s.DendronNote,{noteContent:D}),Z]}),(0,v.jsx)(d.Z,{xs:0,md:4,children:(0,v.jsx)(I,{note:n,offsetTop:B.HEIGHT})})]})})})]})}},88829:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSG:function(){return i}});var r=n(53971),i=!0;t.default=r.Z},12016:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/notes/[id]",function(){return n(88829)}])}},function(e){e.O(0,[155,774,888,179],(function(){return t=12016,e(e.s=t);var t}));var t=e.O();_N_E=t}]);